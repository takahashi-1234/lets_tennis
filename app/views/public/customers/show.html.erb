<div class="main-content">
  <div class="left-content bg-light p-3 shadow-sm">
    <h3>マイページ</h3>
    <table class="table">
      <tr>
        <td>名前</td>
        <td><%= current_customer.name %></td>
      </tr>
      <tr>
        <td>年齢</td>
        <td><%= current_customer.age %></td>
      </tr>
      <tr>
        <td>テニス歴</td>
        <td><%= current_customer.years_of_experience %></td>
      </tr>
      <tr>
        <td>レベル<br><span id="openModal">詳細</spna></td>
        <td><%= current_customer.level %></td>
      </tr>
    
      <tr>
        <td>メールアドレス</td>
        <td><%= current_customer.email %></td>
      </tr>
      <tr>
        <td><%= link_to "編集",edit_customer_path(current_customer.id),class:"btn btn-success" %></td>
        <td><%= link_to "退会する",customer_withdraw_path(current_customer.id),class:"btn btn-danger","data-confirm"=>"本当に退会しますか？",method: :patch %></td>
      </tr>
    </table>
  </div>
  <div class="right-content bg-light p-3 shadow-sm">
    <div class="my_circle">
      <h3>登録サークル</h3>
      <% if current_customer.circles.exists? %>
        <ul>
          <% current_customer.circles.each do |circle| %>
            <li><%= link_to circle_path(circle.id) do %><%= circle.circle_name %><% end %>（登録日：<%= circle.created_at.strftime("%Y/%m/%d")%>）</li>
          <% end %>
        </ul>
      <% else %>
        <p>登録しているサークルはありません</p>
      <% end %>
    </div>
    <div class="my_chat">
      <h3>チャット</h3>           
      <% if current_customer.room_members.exists? %>
        <ul>
        <% @chat_partners.each do |chat_partner| %>
        <!--相手がサークルの保有者の場合は名前を表示し、保有者ではない場合サークル名を表示する-->
          <% if current_customer.circles.include?(chat_partner.circle) %>
            <li><%= link_to circle_chat_path(chat_partner.circle.id) do %><%= chat_partner.customer.name %>（<%= chat_partner.customer.level %>/<%= chat_partner.customer.years_of_experience %>）：<%= chat_partner.circle.circle_name %><% end %></li>
          <% else %>
            <li><%= link_to circle_chat_path(chat_partner.circle.id) do %><%= chat_partner.circle.circle_name %>（<%= chat_partner.circle.level %>）<% end %></li>
          <% end %>
        <% end %>
        </ul>
      <% else %>
        <p>まだチャットはありません</p>
      <% end %>
    </div>
  </div>
</div>
<%= render "public/customers/modal" %>